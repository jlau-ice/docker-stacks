[mysqld]
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
datadir         = /var/lib/mysql
#log-error      = /var/log/mysql/error.log
# By default we only accept connections from localhost
#bind-address   = 127.0.0.1
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0

lower_case_table_names=1
character-set-server=utf8mb4
collation-server=utf8mb4_general_ci

default_time_zone='Asia/Shanghai'

#设置client连接mysql时的字符集,防止乱码
init_connect='SET NAMES utf8mb4 COLLATE utf8mb4_unicode_ci'
#最大连接数
max_connections = 10000
#最大错误连接数
max_connect_errors = 1000
#SQL数据包发送的大小，如果有BLOB对象建议修改成1G
max_allowed_packet = 128M

expire_logs_days=10  #自动删除20天前的日志。默认值为0，表示从不删除

log-bin=mysql-bin  # 开启 binlog
binlog-format=ROW  # 选择 ROW 模式
server_id=1  # 配置 MySQL replaction 需要定义，不要和 canal 的 slaveId 重复
gtid_mode=ON  #开启GTID
enforce-gtid-consistency=ON
log-slave-updates=1

#开启慢查询
slow_query_log=ON
slow_query_log_file=/var/log/mysql/slow_query.log
#慢查询执行的秒数，必须达到此值可被记录
long_query_time=1

#sql_mode        ="STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION"
sql_mode        ="NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION"
